<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Daily Crossword â€” Around the House</title>
<style>
  :root{
    --teal:#1f9dbf;
    --gold:#f5b041;
    --bg:#faf9f6;
    --card:#ffffff;
    --thin:#ddd;
    --gold-shade:#faf1de; /* light gold shaded blocks */
    --num:#999;
    --error:#ffcccc;
  }

  html,body{
    margin:0;padding:0;background:var(--bg);font-family:"Helvetica Neue",Helvetica,Arial,sans-serif;
    -webkit-font-smoothing:antialiased;
    display:flex;justify-content:center;
  }
  .wrap{width:100%;max-width:980px;padding:18px;box-sizing:border-box;display:flex;justify-content:center}
  .card{width:100%;max-width:820px;background:var(--card);border-radius:12px;padding:16px;box-shadow:0 8px 20px rgba(0,0,0,0.06);box-sizing:border-box}
  .title{color:var(--teal);text-align:center;margin:0;font-size:clamp(1.05rem,3.6vw,1.6rem);font-weight:700}
  .subtitle{color:#666;text-align:center;margin:6px 0 6px;font-style:italic}
  .instructions{color:#666;text-align:center;margin:0 0 12px;font-size:0.95rem}
  .grid-wrap{display:flex;justify-content:center;margin:8px 0}
  .crossword{
    display:grid;
    grid-template-columns: repeat(15, 1fr);
    gap:6px;
    width: min(95vw, 720px);
    max-width:720px;
    padding:8px;
    box-sizing:border-box;
  }

  .cell{
    position:relative;
    aspect-ratio: 1 / 1;
    display:flex;
    align-items:center;
    justify-content:center;
    background:var(--card);
    border:1px solid var(--thin);
    box-sizing:border-box;
    font-family:monospace;
  }
  .cell.block{ background: var(--gold-shade); border-color: var(--thin); }
  .num{
    position:absolute; top:4px; left:6px; font-size:10px; color:var(--num);
    user-select:none; pointer-events:none;
  }

  .cell input, .cell .given {
    width:86%; height:86%; font-size:clamp(14px,3.2vw,20px); text-transform:uppercase;
    text-align:center; border-radius:6px; border:1px solid #cfcfcf; box-sizing:border-box; font-weight:700;
    background:transparent; font-family:monospace;
  }
  .cell .given{ pointer-events:none; background:rgba(242,247,247,0.95) }
  .cell input:focus{ outline:none; border-color:var(--teal); background:#e8f8fb; }
  .cell input.conflict{ background:var(--error) !important; border-color:#d00 !important; color:#800 }
  .cell .given.conflict{ background:var(--error) !important; border:1px solid #d00 !important; color:#800 }

  .controls{ display:flex;justify-content:center;gap:10px;margin-top:12px;flex-wrap:wrap }
  button{ padding:8px 12px;border-radius:8px;border:none;cursor:pointer;font-weight:700 }
  .btn-gold{ background:var(--gold); color:#222 }
  .btn-teal{ background:var(--teal); color:#fff }

  .clues{ margin-top:14px; display:flex; gap:18px; flex-direction:column }
  @media(min-width:900px){ .clues{ flex-direction:row } }
  .clue-col{ flex:1 }
  .clue-col h4{ margin:0 0 6px 0; color:var(--teal) }
  .clue{ margin:6px 0; color:#222 }
  .clue small{ color:#666; margin-left:8px }

  .footer-note{ margin-top:12px; text-align:center; color:#666; font-size:0.95rem }
</style>
</head>
<body>
  <div class="wrap">
    <div class="card" role="main" aria-labelledby="title">
      <h1 id="title" class="title">Daily Crossword</h1>
      <div class="subtitle">Sample Theme: Around the House</div>
      <div class="instructions">Type letters into the boxes. Progress saves automatically. Watch for red conflicts.</div>

      <div class="grid-wrap">
        <div id="grid" class="crossword" role="grid" aria-label="Crossword grid"></div>
      </div>

      <div class="controls">
        <button id="clearBtn" class="btn-gold">ðŸ”„ Clear My Answers</button>
        <button id="fillDemo" class="btn-teal">Fill Demo Answers</button>
      </div>

      <div class="clues" aria-label="Crossword clues">
        <div class="clue-col">
          <h4>Across</h4>
          <div class="clue"><strong>1.</strong> Cozy TV companion (4) <small>â€” SOFA</small></div>
          <div class="clue"><strong>5.</strong> Lets in light but keeps out rain (6) <small>â€” WINDOW</small></div>
          <div class="clue"><strong>12.</strong> Nightstand topper, often with a shade (4) <small>â€” LAMP</small></div>
          <div class="clue"><strong>14.</strong> Room for cooking (7) <small>â€” KITCHEN</small></div>
          <div class="clue"><strong>17.</strong> Spotless (5) <small>â€” CLEAN</small></div>
          <div class="clue"><strong>21.</strong> Piece of furniture with legs and a flat top (5) <small>â€” TABLE</small></div>
          <div class="clue"><strong>23.</strong> Decorative floor covering (6) <small>â€” CARPET</small></div>
          <div class="clue"><strong>26.</strong> Interior divider (4) <small>â€” WALL</small></div>
          <div class="clue"><strong>29.</strong> Seat with back and arms (5) <small>â€” CHAIR</small></div>
        </div>

        <div class="clue-col">
          <h4>Down</h4>
          <div class="clue"><strong>1.</strong> Bedroom furniture for rest (3) <small>â€” BED</small></div>
          <div class="clue"><strong>2.</strong> Handle on a door (4) <small>â€” KNOB</small></div>
          <div class="clue"><strong>3.</strong> Soft seating alternative to a sofa (5) <small>â€” COUCH</small></div>
          <div class="clue"><strong>4.</strong> Floor surface you can walk on (5) <small>â€” FLOOR</small></div>
          <div class="clue"><strong>6.</strong> Device that tells time (5) <small>â€” CLOCK</small></div>
          <div class="clue"><strong>8.</strong> Entryway barrier (4) <small>â€” DOOR</small></div>
        </div>
      </div>

      <div class="footer-note">Tip: To create a new crossword from a word list, replace the internal template array or ask me to convert a list for you.</div>
    </div>
  </div>

<script>
/*
Final playable 15x15 template (interlocking layout)
- Blocks use light gold shading ('#' in template)
- Uppercase only inputs
- Autosave via localStorage; Clear uses cookie
*/

const template = [
["S","O","F","A","#","W","I","N","D","O","W","#","L","A","M","P"],
["#","C","O","U","C","H","#","I","#","A","#","B","#","R","#","O"],
["K","I","T","C","H","E","N","#","R","#","I","#","E","#","C","#"],
["#","A","#","A","#","N","#","N","#","D","#","C","#","L","#","K"],
["C","L","E","A","N","#","P","#","T","#","H","#","O","#","N","#"],
["#","L","#","E","#","A","#","L","#","O","#","C","#","K","#","#"],
["#","O","#","T","A","B","L","E","#","C","A","R","P","E","T","#"],
["W","A","L","L","#","F","#","E","#","O","#","O","#","E","#","D"],
["#","E","#","L","#","I","#","R","#","F","#","D","#","A","#","#"],
["#","D","#","L","#","O","#","A","#","K","#","L","#","M","#","#"],
["C","H","A","I","R","#","N","#","B","#","C","#","N","#","#","#"],
["#","O","#","#","#","H","#","#","#","E","#","#","#","#","#","#"],
["#","U","#","#","#","#","#","#","#","#","#","#","#","#","#","#"],
["#","R","#","#","#","#","#","#","#","#","#","#","#","#","#","#"],
["#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#"]
];

const ROWS = 15, COLS = 15;
const gridEl = document.getElementById('grid');
const STORAGE_KEY = 'crossword-aroundhouse-v1';
const CLEAR_FLAG = 'crossword-aroundhouse-cleared-v1';

// cookie helpers
function setCookie(name,value,days){
  const d = new Date(); d.setTime(d.getTime() + (days*24*60*60*1000));
  document.cookie = `${name}=${encodeURIComponent(value)};expires=${d.toUTCString()};path=/`;
}
function getCookie(name){
  const m = document.cookie.match(new RegExp('(^|; )'+name+'=([^;]*)'));
  return m ? decodeURIComponent(m[2]) : '';
}

// compute numbering
function computeNumbers(){
  const nums = Array.from({length:ROWS}, ()=>Array(COLS).fill(0));
  let counter = 1;
  for(let r=0;r<ROWS;r++){
    for(let c=0;c<COLS;c++){
      if(template[r][c] === "#") continue;
      const leftBlock = (c===0) || (template[r][c-1]==="#");
      const topBlock = (r===0) || (template[r-1][c]==="#");
      if(leftBlock || topBlock){ nums[r][c] = counter++; }
    }
  }
  return nums;
}

// build grid
function buildGrid(){
  gridEl.innerHTML = '';
  const nums = computeNumbers();
  const isCleared = getCookie(CLEAR_FLAG) === "true";
  let saved = {};
  try{ if(!isCleared) saved = JSON.parse(localStorage.getItem(STORAGE_KEY) || "{}"); }catch(e){ saved = {}; }

  for(let r=0;r<ROWS;r++){
    for(let c=0;c<COLS;c++){
      const val = template[r] && template[r][c] !== undefined ? template[r][c] : "";
      const cell = document.createElement('div');
      cell.className = 'cell';
      if(val === "#"){
        cell.classList.add('block');
      } else {
        // numbering
        if(nums[r][c]){
          const n = document.createElement('div');
          n.className = 'num';
          n.textContent = nums[r][c];
          cell.appendChild(n);
        }

        if(typeof val === 'string' && val.length === 1 && /[A-Z]/.test(val)){
          const g = document.createElement('div');
          g.className = 'given';
          g.textContent = val;
          cell.appendChild(g);
        } else {
          const input = document.createElement('input');
          input.type = 'text';
          input.maxLength = 1;
          input.autocomplete = 'off';
          input.inputMode = 'latin';
          input.setAttribute('aria-label', `Row ${r+1} Column ${c+1}`);
          const key = `${r}-${c}`;
          if(saved[key]) input.value = saved[key];
          input.addEventListener('input', (e)=>{
            e.target.value = e.target.value.toUpperCase().replace(/[^A-Z]/g,'').slice(0,1);
            if(e.target.value) saved[key] = e.target.value; else delete saved[key];
            try{ localStorage.setItem(STORAGE_KEY, JSON.stringify(saved)); }catch(e){}
            setCookie(CLEAR_FLAG, 'false', 7);
            // optional: validate intersections if we later implement full word checks
          });
          input.addEventListener('paste', (ev)=>{
            ev.preventDefault();
            const txt = (ev.clipboardData || window.clipboardData).getData('text') || '';
            const ch = txt.replace(/[^A-Za-z]/g,'').slice(0,1).toUpperCase();
            if(ch){ input.value = ch; input.dispatchEvent(new Event('input')); }
          });
          cell.appendChild(input);
        }
      }
      gridEl.appendChild(cell);
    }
  }
}

// clear answers
document.getElementById('clearBtn').addEventListener('click', ()=>{
  const inputs = gridEl.querySelectorAll('input');
  inputs.forEach(i=>i.value='');
  try{ localStorage.removeItem(STORAGE_KEY); } catch(e){}
  setCookie(CLEAR_FLAG, 'true', 7);
});

// fill demo answers (fills the givens and known demo words)
document.getElementById('fillDemo').addEventListener('click', ()=>{
  // fill mapping from template: place givens are already visible; but fill remaining demo words into inputs where applicable
  const mapping = {
    // Given letters already filled in template; this mapping fills inputs where words may not be prefilled.
    // (Most across answers are givens in this layout; other spots kept for future)
  };
  const cells = gridEl.querySelectorAll('.cell');
  cells.forEach((cell, idx)=>{
    const r = Math.floor(idx / COLS), c = idx % COLS;
    const key = `${r}-${c}`;
    const inp = cell.querySelector('input');
    if(inp && mapping[key]){
      inp.value = mapping[key];
      inp.dispatchEvent(new Event('input'));
    }
  });
});

// initial render
buildGrid();
</script>
</body>
</html>
